@import '@deephaven/components/scss/custom.scss';

.ui-portal-panel {
  display: contents;
}

.ui-object-container {
  display: contents;
  position: relative;
}

.dh-react-panel {
  .dh-inner-react-panel .iris-grid {
    border: 1px solid var(--dh-color-bg);
    border-radius: $border-radius;
  }

  &:has(.dh-inner-react-panel > .iris-grid:only-child),
  &:has(
      .dh-inner-react-panel
        > .ui-object-container:only-child
        > .iris-grid:only-child
    ),
  &:has(.dh-inner-react-panel > .chart-wrapper:only-child) {
    // remove the default panel padding when grid or chart is the only child
    padding: 0 !important; // important required to override inline spectrum style
    .iris-grid {
      border: none;
      border-radius: 0;
    }
  }
}

.widget-error-view {
  display: flex;
  flex-direction: column;
  gap: $spacer-1;
  flex-grow: 1;

  .widget-error-view-footer {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: $spacer-1;
    flex-wrap: wrap;
  }
}

// TODO: Remove once using the @deephaven/components ErrorView: https://github.com/deephaven/web-client-ui/pull/1965
.error-view {
  position: relative;
  color: $danger;
  border-radius: $border-radius;
  background-color: negative-opacity($exception-transparency);
  display: flex;
  flex-direction: column;
  flex-grow: 0;
  &.expanded {
    flex-grow: 1;
  }
  transition: flex-grow $transition ease-in-out;

  font-family: $font-family-monospace;

  label {
    display: block;
    padding: $spacer;
    font-weight: bold;
  }

  textarea {
    width: 100%;
    padding: $spacer;
    color: $danger;
    background-color: transparent;
    border: 0;
    resize: none;
    outline: none;
    min-height: 100px;
    transition: height $transition ease-in-out;
    white-space: pre;
    flex-grow: 1;
  }

  .error-view-buttons {
    display: flex;
    flex-direction: row;
    gap: 1px;
    position: absolute;
    top: 0;
    right: 0;

    .btn-danger {
      color: $black;
      opacity: 0.8;
      padding: $spacer-1;
      &:active {
        color: $black;
      }
    }

    .error-view-copy-button {
      border-radius: 0;
      min-width: 3rem;
    }

    .error-view-expand-button {
      border-radius: 0 $border-radius 0 0;
      svg {
        margin-right: $spacer-1;
      }
    }
  }
}
